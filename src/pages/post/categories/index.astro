---
import PageBanner from "@components/Banner/PageBanner.astro";
import CategoryPostCard from "@components/CategoryPostCard.astro";
import Base from "@layouts/Base.astro";
import { generateCategoryData } from "src/utils/helpers";
const allPosts = await Astro.glob("../*.{md,mdx}");
const allCategoriesUnique = new Set();
allPosts.map((post) => {
  post.frontmatter.category &&
    post.frontmatter.category.map((category) => {
      allCategoriesUnique.add(category);
    });
});

const allCategoriesData = generateCategoryData(allCategoriesUnique);
---

<Base>
  <PageBanner title="所有分類" />
  <ul class="grid grid-cols-3">
    {
      allCategoriesData.map((category) => (
        <CategoryPostCard category={category} />
      ))
    }
  </ul>
</Base>
