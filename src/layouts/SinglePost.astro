---
import Base from "@layouts/Base.astro";
import Category from "@components/Taxonomy/Category.astro";
import Tags from "@components/Taxonomy/Tags.astro";

const { title, titletc, category, excerpt, author, tags } = Astro.props.post.attributes;
const featuredImage = Astro.props.post.attributes.featuredImage.data;
const featuredIcon = Astro.props.post.attributes.featuredIcon.data;
---

<link rel="stylesheet" href="/style/monokai.min.css">
<script is:inline defer src="/js/highlight.min.js"></script>

<script>hljs.highlightAll();</script>

<Base title={titletc} description={excerpt}>
  <article class="mt-40">
    <header class="mb-16">
      <!-- FeaturedImage -->
      {
        featuredImage ? (
          <img
            class="mx-auto mb-16"
            src={import.meta.env.URL_PREFIX + featuredImage.attributes.url}
            width={featuredImage.attributes.width}
            height={featuredImage.attributes.height}
            alt={featuredImage.attributes.alternativeText}
          />
        ) : (
          ""
        )
      }
      <div class="md:mx-auto relative max-w-prose mx-8">
        <!-- Heading -->
        <h1>
          <div class="mb-2">{title}</div>
          <div class="text-4xl prose dark:prose-invert mb-4">{titletc}</div>
        </h1>
        <!-- Author -->
        <!-- <div class="mb-8 static lg:absolute lg:top-0 lg:left-0 lg:transform-gpu lg:-translate-x-full lg:pr-8 opacity-40">
          作者：{author.data.attributes.name}
          <br>
        </div> -->
        <!-- Categories -->
        <Category category={category.data.attributes} />
        <!-- Tags -->
        <Tags tags={tags.data}></Tags>
        {
          featuredIcon ? (
            <img
              class="mx-auto absolute top-0 left-0 rounded-lg transform-gpu -translate-y-full -mt-8"
              src={import.meta.env.URL_PREFIX + featuredIcon.attributes.url}
              width={featuredIcon.attributes.width}
              height={featuredIcon.attributes.height}
              alt={featuredIcon.attributes.alternativeText}
            />
          ) : (
            ""
          )
        }
      </div>
    </header>
    <div class="prose dark:prose-invert mx-8 md:mx-auto">
      <slot />
    </div>
  </article>
</Base>